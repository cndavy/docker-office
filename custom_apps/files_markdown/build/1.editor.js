(window.webpackJsonpMarkdown2=window.webpackJsonpMarkdown2||[]).push([[1],{786:function(e,t,r){"use strict";r.r(t);var n=r(232),i=r.n(n),a=r(287),o=r.n(a);function u(e,t){var r=0,n=$.extend({divWrap:!1,divClass:"checkbox",idPrefix:"checkbox",readonly:!0,checkboxClass:""},t),i=/\[(X|\s|\_|\-)\]\s(.*)/i,a=function(e,t,a){var o=e.content.match(i);if(null===o)return[e];var u=o[1];return function(e,t,i,a){var o,u=[];n.divWrap&&((o=new i("checkbox_open","div",1)).attrs=[["class",n.divClass]],u.push(o));var s=n.idPrefix+r;return r+=1,(o=new i("checkbox_input","input",0)).attrs=[["type","checkbox"],["id",s]],!0===e&&o.attrs.push(["checked","true"]),n.readonly&&o.attrs.push(["disabled","disabled"]),n.checkboxClass&&o.attrs.push(["class",n.checkboxClass]),o.attrs.push(["data-line",String(a)]),u.push(o),(o=new i("label_open","label",1)).attrs=[["for",s]],u.push(o),(o=new i("text","",0)).content=t,u.push(o),u.push(new i("label_close","label",-1)),n.divWrap&&u.push(new i("checkbox_close","div",-1)),u}("X"===u||"x"===u,o[2],t,a)};return function(e){for(var t=0,r=e.tokens;t<r.length;t++){var n=r[t];if("inline"===n.type){for(var i=n.map?n.map[0]:0,o=[],u=0,s=n.children;u<s.length;u++){var l=s[u];"hardbreak"!==l.type&&"softbreak"!==l.type||i++,o=o.concat(a(l,e.Token,i))}n.children=o}}}}function s(e,t){e.core.ruler.push("checkbox",u(0,t))}var l=r(288),c=r(130),d=r.n(c),h=r(289),p=r.n(h);var f=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;var m=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/;var v=/^http(?:s?):\/\/(?:www\.)?vine\.co\/v\/([a-zA-Z0-9]{1,13}).*/;var b=/^https:\/\/prezi.com\/(.[^/]+)/;function w(e,t){var r=e.toLowerCase();return"youtube"===r?function(e){var t=e.match(f);return t&&11===t[7].length?t[7]:e}(t):"vimeo"===r?function(e){var t=e.match(m);return t&&"string"==typeof t[3]?t[3]:e}(t):"vine"===r?function(e){var t=e.match(v);return t&&11===t[1].length?t[1]:e}(t):"prezi"===r&&function(e){var t=e.match(b);return t?t[1]:e}(t)}function g(e,t){var r=e.renderer.renderInlineAsText;return function(n,i,a){var o=n[i],u=o.attrGet("src");if(!u)return!1;o.attrs[o.attrIndex("alt")][1]=r(o.children,t,a);var s=o.attrGet("alt");return s&&-1!==["youtube","vimeo","vine","prezi"].indexOf(s)?function(e,t,r,n){var i=w(r,n);if(!i)return!1;var a=e.utils.escapeHtml(i),o=r.toLowerCase(),u=t[o].width/16*9;return""===i?"":'<div class="embed-responsive"><iframe class="embed-responsive-item" id="'+r+'player" type="text/html" width="'+t[o].width+'" height="'+u+'" src="'+function(e,t,r){switch(e){case"youtube":return"//www.youtube.com/embed/"+t;case"vimeo":return"//player.vimeo.com/video/"+t;case"vine":return"//vine.co/v/"+t+"/embed/"+r.vine.embed;case"prezi":return"https://prezi.com/embed/"+t+"/?bgcolor=ffffff&amp;lock_to_path=0&amp;autoplay=0&amp;autohide_ctrls=0&amp;landing_data=bHVZZmNaNDBIWnNjdEVENDRhZDFNZGNIUE43MHdLNWpsdFJLb2ZHanI5N1lQVHkxSHFxazZ0UUNCRHloSXZROHh3PT0&amp;landing_sign=1kD6c0N6aYpMUS0wxnQjxzSqZlEB8qNFdxtdjYhwSuI"}}(o,a,t)+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'}(e,t,s,u):!!function(e){return null!==e.match(/\.(webm|mp4|ogv)/)}(u)&&function(e,t,r){return'<div class="embed-responsive"><video controls="controls" src="'+(r=e.utils.escapeHtml(r))+'"/></div>'}(e,0,u)}}var k={youtube:{width:640},vimeo:{width:500},vine:{width:600,embed:"simple"},prezi:{width:550}};function x(e,t){var r=e.renderer.rules.image;e.renderer.rules.image=function(t,n,i,a,o){return i=$.extend(k,i),g(e,i)(t,n,a)||r(t,n,i,a,o)}}var y=r(290),_=r.n(y),C=r(315);r(316),r(317);r.d(t,"Renderer",(function(){return N}));var O=function(e){return"editor/"+d()(e).toLowerCase()};function T(){return Promise.all([r.e(7).then(r.t.bind(null,782,7)),r.e(6).then(r.t.bind(null,783,7))]).then((function(e){var t=e[0],r=e[1].default;return r.use(t),r}))}function A(){return Promise.all([r.e(3),r.e(5)]).then(r.bind(null,784)).then((function(e){return e.MermaidPlugin}))}function L(){return r.e(4).then(r.t.bind(null,785,7)).then((function(e){return e.default}))}var N=function(){function e(e){var t=this;void 0===e&&(e=!1),this.plugins={mermaid:{checker:function(e){return null!==e.match(/(gantt|sequenceDiagram|graph (?:TB|BT|RL|LR|TD))/)},module:A},"highlight.js":{checker:function(e){return-1!==e.indexOf("```")},module:L},katex:{checker:function(e){return-1!==e.indexOf("$")},module:T}},this.md=new i.a({linkify:!0}),this.md.use(s,{checkboxClass:"checkbox",readonly:e}),this.md.use(l.a,{slugify:O}),this.md.use(p.a,{slugify:O}),this.md.use(_.a),this.md.use(x),this.md.use(o.a,"url_new_win","link_open",(function(e,r){var n=e[r].attrGet("href");"#"!==n[0]&&(e[r].attrPush(["target","_blank"]),e[r].attrPush(["rel","noopener"])),e[r].attrSet("href",t.getLinkUrl(n))})),this.md.use(o.a,"internal_image_link","image",(function(e,r){e[r].attrSet("src",t.getImageUrl(e[r].attrGet("src")))})),this.md.renderer.rules.paragraph_open=this.md.renderer.rules.heading_open=this.md.renderer.rules.heading_open=function(e,t,r,n,i){if(e[t].map&&0===e[t].level){var a=e[t].map[0];e[t].attrJoin("class","line"),e[t].attrSet("data-line",String(a))}return i.renderToken(e,t,r,n,i)}}return e.prototype.getLinkUrl=function(e){return"#"===e[0]?"#"+O(e.substr(1)):e},e.prototype.getImageUrl=function(e){return e&&-1!==e.indexOf(".")?-1!==e.indexOf("://")?e:("/"!==e.substr(0,1)&&(OCA.Files_Texteditor.file&&OCA.Files_Texteditor.file.dir?e=OCA.Files_Texteditor.file.dir+"/"+e:OCA.Files.App&&OCA.Files.App.fileList._currentDirectory&&(e=OCA.Files.App.fileList._currentDirectory+"/"+e)),OC.linkToRemote("files"+e.replace(/\/\/+/g,"/"))):e},e.prototype.renderText=function(e,t){var r=this;return this.loadPlugins(e).then((function(){var n=r.md.render(e);Object(C.a)(t[0],"<div>"+n+"</div>",{childrenOnly:!0})}))},e.prototype.loadPlugins=function(e){var t=this;return Promise.all(Object.keys(this.plugins).map((function(r){var n=t.plugins[r];if(!n.loaded&&n.checker(e))return n.loaded=!0,n.module().then((function(e){t.md.use(e)}))})))},e}()}}]);
//# sourceMappingURL=1.editor.js.map